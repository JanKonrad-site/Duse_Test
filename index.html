<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>DU≈†E ‚Äì Maj√°k (rhythm clicker)</title>

  <!-- Modern√≠ fonty -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Syncopate:wght@400;700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="./CSS/main.css">
  <link rel="stylesheet" href="./CSS/menu.css">
  <link rel="stylesheet" href="./CSS/game.css">
  <link rel="stylesheet" href="./CSS/soul.css">
  <link rel="stylesheet" href="./CSS/bubbles.css">
</head>
<body>

  <!-- MENU SCREEN -->
  <div id="menuScreen" class="menu-screen">
    <div class="neon-bg">
      <div class="glowing">
        <span style="--i:1;"></span>
        <span style="--i:2;"></span>
        <span style="--i:3;"></span>
      </div>
      <div class="glowing">
        <span style="--i:1;"></span>
        <span style="--i:2;"></span>
        <span style="--i:3;"></span>
      </div>
      <div class="glowing">
        <span style="--i:1;"></span>
        <span style="--i:2;"></span>
        <span style="--i:3;"></span>
      </div>
      <div class="glowing">
        <span style="--i:1;"></span>
        <span style="--i:2;"></span>
        <span style="--i:3;"></span>
      </div>
    </div>

    <div class="menu-content">
      <div class="main-menu-panel">
        <div class="main-menu-nav">
          <div class="game-logo">DU≈†E</div>
          <div class="menu-links">
            <button id="menuNewGame" class="menu-link active">Nov√° hra</button>
            <button id="menuLevels" class="menu-link">Levely</button>
            <button id="menuPlayer" class="menu-link">Hr√°ƒç</button>
            <button id="menuHowTo"  class="menu-link">Jak hr√°t</button>
          </div>
        </div>

        <div class="main-menu-content">
          <!-- Sekce: NOV√Å HRA (v√Ωchoz√≠) -->
          <section class="menu-section menu-section-new menu-section-active" data-section="new">
            <div>
              <div class="main-menu-heading">Neonov√Ω svƒõt svƒõtla a ticha</div>
              <p class="main-menu-tagline">
                Rytmick√° klikac√≠ hra, kde du≈°e sb√≠r√° svƒõteln√© kapky, odhaluje skryt√Ω obraz
                a podle hudby se rozhoduje, jestli se rozho≈ô√≠‚Ä¶ nebo rozplyne.
              </p>

              <div class="hero-level level-card" data-level-key="majak">
                <h3>Pokraƒçovat do levelu ‚ÄûMaj√°k‚Äú</h3>
                <div class="level-meta">Level 1 ¬∑ st≈ôedn√≠ obt√≠≈ænost</div>
                <p>Noc, mo≈ôe, v√≠tr a osamƒõl√Ω maj√°k. Prvn√≠ cesta du≈°e za svƒõtlem.</p>
                <button id="playMajakFromMenu" class="btn primary btn-big">
                  ‚ñ∂ Zaƒç√≠t hr√°t
                </button>
              </div>
            </div>

            <div class="main-menu-tip">
              Tip: dej si prohl√≠≈æeƒç do re≈æimu cel√© obrazovky (F11) a vezmi sluch√°tka üéß
            </div>
          </section>

          <!-- Sekce: LEVELY -->
          <section class="menu-section menu-section-levels" data-section="levels">
            <div>
              <div class="main-menu-heading">V√Ωbƒõr levelu</div>
              <p class="main-menu-tagline">
                Postupnƒõ p≈ôibudou dal≈°√≠ krajiny ‚Äì zat√≠m je dostupn√Ω prvn√≠ level ‚ÄûMaj√°k‚Äú
                a experiment√°ln√≠ zamƒçen√Ω level ‚ÄûMaj√°k II‚Äú.
              </p>

              <div class="level-list">
                <!-- Level 1 ‚Äì v≈ædy odemƒçen√Ω -->
                <div class="level-card" data-level-key="majak">
                  <h3>Maj√°k</h3>
                  <div class="level-meta">Level 1 ¬∑ st≈ôedn√≠ obt√≠≈ænost</div>
                  <p>Noc, mo≈ôe, v√≠tr a osamƒõl√Ω maj√°k. Prvn√≠ cesta du≈°e za svƒõtlem.</p>
                  <button class="btn primary level-play-btn" data-level-key="majak">
                    Hr√°t level ‚ÄûMaj√°k‚Äú
                  </button>
                </div>

                <!-- Level 2 ‚Äì zamƒçen√Ω, odemkne se za 1500 ‚ú¶ nebo 100% v levelu 1 -->
                <div class="level-card level-card-disabled" data-level-key="majak2">
                  <h3>Maj√°k II</h3>
                  <div class="level-meta">Level 2 ¬∑ tƒõ≈æ≈°√≠ rytmus, zamƒçen√Ω</div>
                  <p>
                    Je≈°tƒõ se rod√≠ v mlze‚Ä¶ Odemkne se po <strong>100 % dokonƒçen√≠</strong> levelu ‚ÄûMaj√°k‚Äú
                    nebo za mƒõnu.
                  </p>
                  <div class="level-price">
                    Cena odemknut√≠: <span class="level-price-value">1500 ‚ú¶</span>
                  </div>
                  <button class="btn primary level-play-btn" data-level-key="majak2">
                    Hr√°t level ‚ÄûMaj√°k II‚Äú
                  </button>
                  <button class="btn level-buy-btn" data-level-key="majak2">
                    Odemknout za 1500 ‚ú¶
                  </button>
                </div>
              </div>
            </div>
          </section>

          <!-- Sekce: HR√Åƒå (nastaven√≠ efekt≈Ø + vizu√°l) -->
          <section class="menu-section menu-section-player" data-section="player">
            <div>
              <div class="main-menu-heading">Hr√°ƒç &amp; nastaven√≠</div>
              <p class="main-menu-tagline">
                Nastav si, jak moc m√° hra blikat, jak√© ambientn√≠ efekty se pou≈æij√≠ a sleduj svou mƒõnu.
              </p>

              <div class="player-balance">
                <div class="player-balance-label">Mƒõna (svƒõteln√© √∫lomky):</div>
                <div class="player-balance-value" id="currencyValue">0 ‚ú¶</div>
              </div>

              <div class="player-settings-grid">
                <div class="player-settings-column">
                  <h3>Flash efekt p≈ôi combu</h3>
                  <p class="player-settings-help">
                    Vyber, jak se m√° chovat celoplo≈°n√Ω flash, kter√Ω se aktivuje p≈ôi combu (ka≈æd√Ωch 5 z√°sah≈Ø).
                  </p>
                  <label class="player-field">
                    <span>Styl flash efektu</span>
                    <select id="flashEffectSelect">
                      <option value="classic">Klasick√Ω neonov√Ω flash</option>
                      <option value="soft">Mƒõkƒç√≠, decentn√≠ flash</option>
                      <option value="strong">Siln√Ω, agresivn√≠ flash</option>
                      <option value="mono">Jas bez barev (mono)</option>
                      <option value="off">Vypnuto</option>
                    </select>
                  </label>
                </div>

                <div class="player-settings-column">
                  <h3>Ambienty p≈ôi pohlcen√≠</h3>
                  <p class="player-settings-help">
                    Zapni/vypni jemn√© efekty, kter√© se spou≈°t√≠ p≈ôi z√°sahu kapky.
                  </p>
                  <div class="player-ambient-list">
                    <label class="ambient-item">
                      <input type="checkbox" id="ambientGlow">
                      <span>Glow du≈°e p≈ôi z√°sahu</span>
                    </label>
                    <label class="ambient-item">
                      <input type="checkbox" id="ambientShockwave">
                      <span>Barevn√° vlna (shockwave) v pozad√≠</span>
                    </label>
                    <label class="ambient-item">
                      <input type="checkbox" id="ambientParticles">
                      <span>Dal≈°√≠ ƒç√°stice kolem du≈°e</span>
                    </label>
                    <label class="ambient-item">
                      <input type="checkbox" id="ambientSaturate">
                      <span>Silnƒõj≈°√≠ saturace barvy p≈ôi z√°sahu</span>
                    </label>
                  </div>
                </div>
              </div>

              <div class="player-actions">
                <button id="savePlayerSettingsBtn" class="btn primary">Ulo≈æit nastaven√≠</button>
                <span id="playerSettingsStatus" class="player-settings-status"></span>
              </div>

              <div class="saved-visual-card" id="savedVisualCard">
                <h3>Ulo≈æen√Ω vizu√°l</h3>
                <p id="savedVisualText">
                  Zat√≠m nem√°≈° ulo≈æen√Ω ≈æ√°dn√Ω vizu√°l z dohran√©ho levelu.
                </p>
                <div class="saved-visual-actions">
                  <button id="replaySavedVisualBtn" class="btn" disabled>P≈ôehr√°t vizu√°l</button>
                  <button id="clearSavedVisualBtn" class="btn" disabled>Smazat</button>
                </div>
              </div>
            </div>
          </section>

          <!-- Sekce: JAK HR√ÅT ‚Äì animovan√Ω n√°hled -->
          <section class="menu-section menu-section-howto" data-section="how">
            <div>
              <div class="main-menu-heading">Jak hr√°t</div>
              <p class="main-menu-tagline">
                Pod√≠vej se na mini sc√©nu: kapka let√≠, klik vytvo≈ô√≠ ≈°plouch a du≈°e se rozz√°≈ô√≠.
              </p>

              <div class="tutorial-layout">
                <div class="tutorial-visual">
                  <div class="tutorial-placeholder">
                    <div class="tv-bg"></div>
                    <div class="tv-soul"></div>
                    <div class="tv-bubble"></div>
                    <div class="tv-splash"></div>
                    <div class="tv-click-hint">klik</div>
                  </div>
                </div>

                <div class="tutorial-text">
                  <p><strong>1)</strong> Kapky svƒõtla se rod√≠ vpravo a let√≠ <strong>zprava doleva</strong> ‚Äì tady m√°≈° mal√Ω n√°hled jedn√© kapky.</p>
                  <p><strong>2)</strong> Kdy≈æ klikne≈° do prostoru kolem kapky, vznikne <strong>≈°plouchnut√≠</strong> ‚Äì roz≈°i≈ôuj√≠c√≠ se kruh, kter√Ω ji m≈Ø≈æe trefit.</p>
                  <p><strong>3)</strong> P≈ô√≠m√Ω z√°sah do kapky je <strong>super hit</strong>: vƒõt≈°√≠ ≈°plouch, du≈°e v√≠c vyroste a z√≠sk√°≈° v√≠c bod≈Ø.</p>
                  <p><strong>4)</strong> Za z√°sahy se pozad√≠ levelu postupnƒõ <strong>vybarvuje</strong>. Minut√© kapky naopak du≈°i zmen≈°uj√≠.</p>
                  <p><strong>5)</strong> Ide√°ln√≠ je klikat <strong>do rytmu skladby</strong> ‚Äì jako kdybys hr√°l beat, ne spamoval my≈°.</p>
                </div>
              </div>
            </div>
          </section>

        </div>
      </div>
    </div>
  </div>

  <!-- GAME SCREEN -->
  <div id="gameScreen" class="game-area hidden">
    <div class="world" id="world">
      <div class="scroll-track" id="scrollTrack">
        <img id="bgImage1" src="" alt="level background" draggable="false">
        <img id="bgImage2" src="" alt="level background copy" draggable="false">
      </div>

      <div class="soul-wrapper" id="soulWrapper">
        <div class="soul-float">
          <div class="soul" id="soul">
            <div class="soul-core"></div>
            <div class="soul-particles">
              <div class="soul-rotate">
                <div class="soul-angle"><div class="soul-size"><div class="soul-position"><div class="soul-pulse"><div class="soul-particle-dot"></div></div></div></div></div>
                <div class="soul-angle"><div class="soul-size"><div class="soul-position"><div class="soul-pulse"><div class="soul-particle-dot"></div></div></div></div></div>
                <div class="soul-angle"><div class="soul-size"><div class="soul-position"><div class="soul-pulse"><div class="soul-particle-dot"></div></div></div></div></div>
                <div class="soul-angle"><div class="soul-size"><div class="soul-position"><div class="soul-pulse"><div class="soul-particle-dot"></div></div></div></div></div>
                <div class="soul-angle"><div class="soul-size"><div class="soul-position"><div class="soul-pulse"><div class="soul-particle-dot"></div></div></div></div></div>
                <div class="soul-angle"><div class="soul-size"><div class="soul-position"><div class="soul-pulse"><div class="soul-particle-dot"></div></div></div></div></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- TEMPLATE bubliny -->
    <div class="bubble" id="bubbleTemplate"></div>

    <div class="hud-top">
      <button id="restartBtn" class="btn">Restart</button>
      <button id="backToMenuInHud" class="btn">Menu</button>
      <button id="muteBtn" class="btn">Mute</button>
      <!-- POZOR: tady u≈æ NEN√ç id="playPauseBtn", jen obyƒçejn√© tlaƒç√≠tko
           Play/pause ovl√°d√°me kulat√Ωm tlaƒç√≠tkem u waveformy -->
      <button class="btn">‚ùö‚ùö</button>

      <!-- timeline / n√°zev skladby ‚Äì waveform -->
      <div id="timeInfo">
        ‚ô™ Maj√°k
        <div class="waveform-wrap">
          <!-- tlaƒç√≠tko play/pause ‚Äì JEDIN√â s id="playPauseBtn" -->
          <button id="playPauseBtn" class="track-btn">‚ùö‚ùö</button>

          <!-- ≈°ed√© pozad√≠ waveformy -->
          <svg class="waveform waveform-bg" viewBox="0 0 100 16" preserveAspectRatio="none">
            <polyline class="waveform-shape" points="
              0,8  2,6  4,10  6,5  8,11 10,4
              12,12 14,5 16,11 18,6 20,10 22,4
              24,12 26,5 28,11 30,6 32,10 34,4
              36,12 38,5 40,11 42,6 44,10 46,4
              48,12 50,5 52,11 54,6 56,10 58,4
              60,12 62,5 64,11 66,6 68,10 70,4
              72,12 74,5 76,11 78,6 80,10 82,4
              84,12 86,5 88,11 90,6 92,10 94,7
              96,9  98,8 100,8
            " />
          </svg>

          <!-- barevn√° waveform ‚Äì vypl≈àuje se podle --progress -->
          <svg class="waveform waveform-fg" viewBox="0 0 100 16" preserveAspectRatio="none">
            <polyline class="waveform-shape" points="
              0,8  2,6  4,10  6,5  8,11 10,4
              12,12 14,5 16,11 18,6 20,10 22,4
              24,12 26,5 28,11 30,6 32,10 34,4
              36,12 38,5 40,11 42,6 44,10 46,4
              48,12 50,5 52,11 54,6 56,10 58,4
              60,12 62,5 64,11 66,6 68,10 70,4
              72,12 74,5 76,11 78,6 80,10 82,4
              84,12 86,5 88,11 90,6 92,10 94,7
              96,9  98,8 100,8
            " />
          </svg>
        </div>
      </div>

      <span id="scoreInfo">Sk√≥re: 0</span>
      <span id="statusText" class="status-message"></span>
    </div>

    <div class="hud-bottom">
      <div class="stats" id="stats"></div>
    </div>

    <!-- INTRO LEVELU ‚Äì minimalistick√Ω artov√Ω √∫vod -->
    <div class="overlay overlay-intro" id="levelIntroOverlay">
      <div class="overlay-panel intro-panel">
        <p class="intro-line intro-line-1">
          Ticho. Jen tmav√° voda a bod svƒõtla v d√°lce.
        </p>
        <p class="intro-line intro-line-2">
          Du≈°e ƒçek√°, a≈æ ji pust√≠≈° na cestu.
        </p>
        <p class="intro-line intro-line-3">
          Hraj do rytmu. Co netref√≠≈°, zmiz√≠.
        </p>

        <button id="startBtn" class="intro-start">Spustit level</button>
        <button id="backToMenuFromIntro" class="intro-back">Zpƒõt do menu</button>

        <div id="imageStatus" class="image-status"></div>
      </div>
    </div>

    <!-- V√ùSLEDKY -->
    <div class="overlay overlay-hidden" id="resultOverlay">
      <div class="overlay-panel">
        <h2>V√Ωsledek levelu</h2>
        <div id="resultStats"></div>

        <div id="currencyInfo" class="currency-info"></div>

        <div class="result-actions">
          <button id="saveVisualBtn" class="btn">Ulo≈æit tento vizu√°l</button>
          <button id="playAgainBtn" class="btn primary">Hr√°t level znovu</button>
          <button id="backToMenuFromResult" class="btn">Zpƒõt do menu</button>
        </div>
      </div>
    </div>
  </div>

  <div id="cursorLight"></div>

  <audio id="music" preload="auto"></audio>

  <script src="./scripts/duse.js"></script>
</body>
</html>
